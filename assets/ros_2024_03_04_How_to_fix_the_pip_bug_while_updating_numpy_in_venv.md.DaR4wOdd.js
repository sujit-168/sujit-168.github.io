import{_ as o}from"./chunks/ArticleMetadata.DIcsD6Lo.js";import{_ as h,B as r,c as d,o as e,j as t,G as c,a4 as k,a as u,w as _,b as g,e as m}from"./chunks/framework.CETqlJrj.js";import"./chunks/theme.o96VgL0S.js";const P=JSON.parse('{"title":"修复在 venv 虚拟环境中无法升级 numpy 的 pip 错误","description":"","frontmatter":{"title":"修复在 venv 虚拟环境中无法升级 numpy 的 pip 错误","date":"2024-03-04 17:39","categories":["ROS"],"tags":["venv","ROS","pip"],"copyright":true},"headers":[],"relativePath":"ros/2024/03/04/How_to_fix_the_pip_bug_while_updating_numpy_in_venv.md","filePath":"ros/2024/03/04/How_to_fix_the_pip_bug_while_updating_numpy_in_venv.md","lastUpdated":1711185179000}'),y={name:"ros/2024/03/04/How_to_fix_the_pip_bug_while_updating_numpy_in_venv.md"};function b(s,a,v,F,f,C){const p=o,l=r("ClientOnly");return e(),d("div",null,[a[0]||(a[0]=t("h1",{id:"修复在-venv-虚拟环境中无法升级-numpy-的-pip-错误",tabindex:"-1"},[u("修复在 venv 虚拟环境中无法升级 numpy 的 pip 错误 "),t("a",{class:"header-anchor",href:"#修复在-venv-虚拟环境中无法升级-numpy-的-pip-错误","aria-label":'Permalink to "修复在 venv 虚拟环境中无法升级 numpy 的 pip 错误"'},"​")],-1)),c(l,null,{default:_(()=>{var i,n;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((n=s.$frontmatter)==null?void 0:n.showArticleMetadata)??!0)?(e(),g(p,{key:0,article:s.$frontmatter},null,8,["article"])):m("",!0)]}),_:1}),a[1]||(a[1]=k(`<h2 id="前情回顾" tabindex="-1">前情回顾 <a class="header-anchor" href="#前情回顾" aria-label="Permalink to &quot;前情回顾&quot;">​</a></h2><p>当时公司大佬使用 <code>venv</code> 虚拟环境对 ROS1 和 ROS2 的分割，主要是避免一些恶心、不合理的路径引用问题。在不引入系统 Python 环境变量时，测试时常会出现缺少一些与 ROS 相关的 <code>.so</code> 路径缺失的问题，通过软链接到系统 Python 环境中的同名 <code>.so</code> 可以解决</p><p>为了方便，我们便将系统 Python 环境中的 <code>site-packages</code> 路径软链接到 <code>venv</code> 虚拟环境中的 <code>site-packages</code> 路径，对.ros1 中的 <code>site-packages</code> 进行覆盖</p><h2 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to &quot;问题描述&quot;">​</a></h2><p>在安装 f1tenth-gym 的 python 环境时，遇到了 numpy 版本过低的问题，需要升级 numpy 版本</p><ul><li>原来 numpy 版本为 1.17.4</li><li>需要升级 numpy 版本到 1.22.0</li></ul><h3 id="升级-numpy-版本" tabindex="-1">升级 numpy 版本 <a class="header-anchor" href="#升级-numpy-版本" aria-label="Permalink to &quot;升级 numpy 版本&quot;">​</a></h3><ul><li>首先，在虚拟环境中安装 numpy 1.22.0</li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> numpy==</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1.22.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>显示 successfully installed 然后，开心继续下一步，（继续是不可能的，要能继续不就没有这篇博客了）</p><h3 id="检查一下-numpy-版本" tabindex="-1">检查一下 numpy 版本 <a class="header-anchor" href="#检查一下-numpy-版本" aria-label="Permalink to &quot;检查一下 numpy 版本&quot;">​</a></h3><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">.ros1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">tianbot@ros2go:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pip3</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> list</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> numpy</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">numpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">                         1.17.4</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[notice] A new release of pip is available: 23.3.1 -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> 24.0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[notice] To update, run: pip install --upgrade pip</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">.ros1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">tianbot@ros2go:~$</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>好家伙，简直不讲武德！！！！！！</strong></p><h2 id="问题解决" tabindex="-1">问题解决 <a class="header-anchor" href="#问题解决" aria-label="Permalink to &quot;问题解决&quot;">​</a></h2><h3 id="_1-先检查-pip-路径" tabindex="-1"><strong>1. 先检查 pip 路径</strong> <a class="header-anchor" href="#_1-先检查-pip-路径" aria-label="Permalink to &quot;**1. 先检查 pip 路径**&quot;">​</a></h3><p><img src="https://cn-sy1.rains3.com/dfdfgf/blog/How_to_fix_the_pip_bug_while_updating_numpy_in_venv/20240304181122.png" alt="" loading="lazy"></p><h3 id="_2-修改环境变量-pythonpath" tabindex="-1"><strong>2. 修改环境变量 PYTHONPATH</strong> <a class="header-anchor" href="#_2-修改环境变量-pythonpath" aria-label="Permalink to &quot;**2. 修改环境变量 PYTHONPATH**&quot;">​</a></h3><p><img src="https://cn-sy1.rains3.com/dfdfgf/blog/How_to_fix_the_pip_bug_while_updating_numpy_in_venv/20240304181210.png" alt="" loading="lazy"></p><h3 id="_3-重新更新-numpy" tabindex="-1"><strong>3. 重新更新 numpy</strong> <a class="header-anchor" href="#_3-重新更新-numpy" aria-label="Permalink to &quot;**3. 重新更新 numpy**&quot;">​</a></h3><p><img src="https://cn-sy1.rains3.com/dfdfgf/blog/How_to_fix_the_pip_bug_while_updating_numpy_in_venv/20240304181249.png" alt="" loading="lazy"></p><p>关键命令</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">.ros1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">tianbot@ros2go:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> echo</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> $PYTHONPATH</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">/home/tianbot/study_ws/devel/lib/python3/dist-packages:/home/tianbot/manipulation_ws/devel/lib/python3/dist-packages:/home/tianbot/tianbot_mini_ws/devel/lib/python3/dist-packages:/home/tianbot/tianbot_ws/devel/lib/python3/dist-packages:/home/tianbot/catkin_ws/devel/lib/python3/dist-packages:/opt/ros/noetic/lib/python3/dist-packages</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_4-总结一下" tabindex="-1"><strong>4. 总结一下</strong> <a class="header-anchor" href="#_4-总结一下" aria-label="Permalink to &quot;**4. 总结一下**&quot;">​</a></h3><p>关键就是要将<code>/usr/lib/python3/dist-packages</code>的系统路径从 <code>PYTHONPATH</code> 中移除。否则会一直干扰.ros1 中的 pip 命令。</p>`,24))])}const x=h(y,[["render",b]]);export{P as __pageData,x as default};
