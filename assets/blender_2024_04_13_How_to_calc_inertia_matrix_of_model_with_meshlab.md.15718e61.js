import{_ as t}from"./chunks/ArticleMetadata.89eb889c.js";import{_ as r,C as c,o as l,c as i,H as y,w as d,k as o,a as m,Q as h,b as F,e as A}from"./chunks/framework.4303053c.js";import"./chunks/md5.3e7612d8.js";const k=JSON.parse('{"title":"如何使用 meshlab 计算模型的惯性矩阵","description":"","frontmatter":{"title":"如何使用 meshlab 计算模型的惯性矩阵","date":"2024-04-13 23:06","categories":["Blender","Meshlab","ros","Gazebo"],"tags":[".STL",".dae","Meshlab"],"copyright":true},"headers":[],"relativePath":"blender/2024/04/13/How_to_calc_inertia_matrix_of_model_with_meshlab.md","filePath":"blender/2024/04/13/How_to_calc_inertia_matrix_of_model_with_meshlab.md","lastUpdated":1713023705000}'),_={name:"blender/2024/04/13/How_to_calc_inertia_matrix_of_model_with_meshlab.md"},C=o("h1",{id:"如何使用-meshlab-计算-inertia-matrix",tabindex:"-1"},[m("如何使用 Meshlab 计算 inertia Matrix "),o("a",{class:"header-anchor",href:"#如何使用-meshlab-计算-inertia-matrix","aria-label":'Permalink to "如何使用 Meshlab 计算 inertia Matrix"'},"​")],-1),u=h(`<h2 id="导入-dae-模型" tabindex="-1">导入 DAE 模型 <a class="header-anchor" href="#导入-dae-模型" aria-label="Permalink to &quot;导入 DAE 模型&quot;">​</a></h2><p>根据<strong>gazebo</strong>的官方文档，惯性系数矩阵需要借助<strong>meshlab</strong>工具来进行计算</p><ul><li>使用<strong>import mesh</strong>功能时，导入 <code>.stl</code> 这种网格实体格式，或者 <code>.dae</code> 格式 (这个文件是将平面的<code>stl</code>网格模型导入，贴图后，再导出 <code>.dae</code> 后得到的)</li></ul><p>如果遇到这种报错，则需要注意你导出的<strong>DAE</strong>文件存在问题</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">&#39;vcount&#39;</span></span>
<span class="line"><span style="color:#F47067;">******</span><span style="color:#ADBAC7;"> LoadTriangularMesh (</span><span style="color:#F69D50;">initial</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">mesh</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">size</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">8</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">******</span><span style="color:#ADBAC7;">    material id </span><span style="color:#96D0FF;">&#39;Material_002-material&#39;</span><span style="color:#ADBAC7;"> -</span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&#39;#Material_002-material&#39;</span></span>
<span class="line"><span style="color:#ADBAC7;">====== </span><span style="color:#96D0FF;">searching</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">among</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">library_effects</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">the</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">effect</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">with</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">id</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&#39;Material_002-effect&#39;</span><span style="color:#ADBAC7;"> </span></span>
<span class="line"><span style="color:#F47067;">******</span><span style="color:#ADBAC7;">   but we were not able to find the corresponding image node</span></span>
<span class="line"><span style="color:#F47067;">******</span><span style="color:#ADBAC7;"> LoadTriangularMesh (</span><span style="color:#F69D50;">final</span><span style="color:#ADBAC7;">  </span><span style="color:#96D0FF;">mesh</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">size</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">8</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">8</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">-</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">12</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">12</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">****</span><span style="color:#ADBAC7;"> Loading a Geometry Mesh </span><span style="color:#F47067;">****</span><span style="color:#ADBAC7;"> (</span><span style="color:#F69D50;">final</span><span style="color:#ADBAC7;">   </span><span style="color:#96D0FF;">mesh</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">size</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">8</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">8</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">-</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">12</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">12</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F69D50;">Segmentation</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">fault</span><span style="color:#ADBAC7;"> (core </span><span style="color:#96D0FF;">dumped</span><span style="color:#ADBAC7;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">&#39;vcount&#39;</span></span>
<span class="line"><span style="color:#D73A49;">******</span><span style="color:#24292E;"> LoadTriangularMesh (</span><span style="color:#6F42C1;">initial</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mesh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">size</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">******</span><span style="color:#24292E;">    material id </span><span style="color:#032F62;">&#39;Material_002-material&#39;</span><span style="color:#24292E;"> -</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;#Material_002-material&#39;</span></span>
<span class="line"><span style="color:#24292E;">====== </span><span style="color:#032F62;">searching</span><span style="color:#24292E;"> </span><span style="color:#032F62;">among</span><span style="color:#24292E;"> </span><span style="color:#032F62;">library_effects</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">effect</span><span style="color:#24292E;"> </span><span style="color:#032F62;">with</span><span style="color:#24292E;"> </span><span style="color:#032F62;">id</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;Material_002-effect&#39;</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">******</span><span style="color:#24292E;">   but we were not able to find the corresponding image node</span></span>
<span class="line"><span style="color:#D73A49;">******</span><span style="color:#24292E;"> LoadTriangularMesh (</span><span style="color:#6F42C1;">final</span><span style="color:#24292E;">  </span><span style="color:#032F62;">mesh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">size</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8</span><span style="color:#24292E;"> </span><span style="color:#032F62;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">12</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">12</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">****</span><span style="color:#24292E;"> Loading a Geometry Mesh </span><span style="color:#D73A49;">****</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">final</span><span style="color:#24292E;">   </span><span style="color:#032F62;">mesh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">size</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8</span><span style="color:#24292E;"> </span><span style="color:#032F62;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">12</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">12</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6F42C1;">Segmentation</span><span style="color:#24292E;"> </span><span style="color:#032F62;">fault</span><span style="color:#24292E;"> (core </span><span style="color:#032F62;">dumped</span><span style="color:#24292E;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>导入的<code>.stl</code>文件应为闭合的网格文件，否则会触发<code>waterlight</code>的不防水问题，导致无法正确计算惯性系数矩阵。解决方法为，将未封闭的网格封闭后重新导出。</li><li><a href="https://stackoverflow.com/questions/45685571/issue-with-volume-calculation" target="_blank" rel="noreferrer">Issue with volume calculation</a></li></ul><h2 id="惯性矩阵各自计算" tabindex="-1">惯性矩阵各自计算 <a class="header-anchor" href="#惯性矩阵各自计算" aria-label="Permalink to &quot;惯性矩阵各自计算&quot;">​</a></h2><ul><li>每个实体模型 (<code>stl</code>) 导出各自的惯性矩阵，不要图省事，导入一个 <code>.dae</code> 模型，整体计算，这种极容易出现抖动的问题</li></ul><p><img src="https://cn-sy1.rains3.com/dfdfgf/blog/How_to_calc_inertia_matrix_of_model_with_meshlab/image-20240413201440958.png" alt="image-20240413201440958"></p><ul><li>使用<strong>Filter</strong>下的<strong>Quilty Measure and Computations</strong>中的<strong>compute Geometric Measures</strong>功能</li></ul><p><img src="https://cn-sy1.rains3.com/dfdfgf/blog/How_to_calc_inertia_matrix_of_model_with_meshlab/image-20240403170542166.png" alt="image-20240403170542166"></p><ul><li>得到惯性张量矩阵即可使用</li></ul><p><img src="https://cn-sy1.rains3.com/dfdfgf/blog/How_to_calc_inertia_matrix_of_model_with_meshlab/image-20240403170214047.png" alt="image-20240403170214047"></p><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><h3 id="segmentation-fault" tabindex="-1">Segmentation Fault <a class="header-anchor" href="#segmentation-fault" aria-label="Permalink to &quot;Segmentation Fault&quot;">​</a></h3><p>导入 .<strong>dae</strong>格式的 mesh，软件直接<strong>segmentation fault</strong>，最后发现是应为该<code>.dae</code>文件包含了有重叠部分的文件，删除一个，再次导出 <code>.dae</code> 即可</p><h3 id="没有惯性矩阵" tabindex="-1">没有惯性矩阵 <a class="header-anchor" href="#没有惯性矩阵" aria-label="Permalink to &quot;没有惯性矩阵&quot;">​</a></h3><p>没有计算出惯性矩阵，检查你的模型是否是一个封闭的实体</p>`,18);function D(s,g,b,f,B,E){const e=t,p=c("ClientOnly");return l(),i("div",null,[C,y(p,null,{default:d(()=>{var a,n;return[(((a=s.$frontmatter)==null?void 0:a.aside)??!0)&&(((n=s.$frontmatter)==null?void 0:n.showArticleMetadata)??!0)?(l(),F(e,{key:0,article:s.$frontmatter},null,8,["article"])):A("",!0)]}),_:1}),u])}const v=r(_,[["render",D]]);export{k as __pageData,v as default};
